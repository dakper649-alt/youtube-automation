"""
–¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ Ken Burns Effects
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–º–Ω—É—é –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å—Ü–µ–Ω
"""

from services.ken_burns import KenBurnsEffect, SceneType, EffectType


def main():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã Ken Burns Effects"""

    print("=" * 80)
    print("üé¨ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø KEN BURNS EFFECTS")
    print("=" * 80)

    # –°–æ–∑–¥–∞—ë–º –º–µ–Ω–µ–¥–∂–µ—Ä —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
    ken_burns = KenBurnsEffect()

    # –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    test_scenes = [
        {
            'text': '–ó–Ω–∞–µ—Ç–µ –ª–∏ –≤—ã, —á—Ç–æ 90% –ª—é–¥–µ–π –¥–µ–ª–∞—é—Ç —ç—Ç—É –æ—à–∏–±–∫—É?',
            'duration': 5.0
        },
        {
            'text': '–°–µ–≥–æ–¥–Ω—è —è —Ä–∞—Å—Å–∫–∞–∂—É –≤–∞–º —Ç—Ä–∏ —Å–µ–∫—Ä–µ—Ç–∞ —É—Å–ø–µ—Ö–∞',
            'duration': 4.5
        },
        {
            'text': '–ü–µ—Ä–≤—ã–π —Å–µ–∫—Ä–µ—Ç - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ',
            'duration': 6.0
        },
        {
            'text': '–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Å–≤–æ–π –¥–µ–Ω—å —Å —É—Ç—Ä–∞',
            'duration': 5.5
        },
        {
            'text': '–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥—ë–º –∫–æ –≤—Ç–æ—Ä–æ–º—É —Å–µ–∫—Ä–µ—Ç—É',
            'duration': 3.5
        },
        {
            'text': '–í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å: –ø–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ –≤–∞–∂–Ω–µ–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏',
            'duration': 5.0
        },
        {
            'text': '–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–µ –≤–∏–¥–µ–æ!',
            'duration': 4.0
        },
        {
            'text': '–¢—Ä–µ—Ç–∏–π —Å–µ–∫—Ä–µ—Ç –∫–∞—Å–∞–µ—Ç—Å—è –≤–∞—à–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è',
            'duration': 5.0
        },
        {
            'text': '–ò—Ç–∞–∫, –ø–æ–¥–≤–æ–¥—è –∏—Ç–æ–≥ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ —Ç—Ä–∏ –ø—Ä–∞–≤–∏–ª–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å',
            'duration': 6.0
        }
    ]

    print(f"\nüìä –û–±—Ä–∞–±–æ—Ç–∫–∞ {len(test_scenes)} —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω...\n")

    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—Ü–µ–Ω—ã
    enriched_scenes = ken_burns.process_scenes(test_scenes)

    # –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    for i, scene in enumerate(enriched_scenes, 1):
        print(f"–°—Ü–µ–Ω–∞ {i}/{len(enriched_scenes)}")
        print(f"  üìù –¢–µ–∫—Å—Ç: {scene['text'][:60]}...")
        print(f"  ‚è±Ô∏è  –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {scene['duration']}—Å")
        print(f"  üé≠ –¢–∏–ø —Å—Ü–µ–Ω—ã: {scene['scene_type']}")
        print(f"  üé• –≠—Ñ—Ñ–µ–∫—Ç: {scene['effect_type']}")

        params = scene['effect_params']
        print(f"  üìê –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:")
        print(f"     - –ù–∞—á–∞–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±: {params['start_scale']}")
        print(f"     - –ö–æ–Ω–µ—á–Ω—ã–π –º–∞—Å—à—Ç–∞–±: {params['end_scale']}")
        print(f"     - –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è: {params['start_position']}")
        print(f"     - –ö–æ–Ω–µ—á–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è: {params['end_position']}")
        print()

    # –í—ã–≤–æ–¥–∏–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    stats = ken_burns.get_stats()

    print("=" * 80)
    print("üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê")
    print("=" * 80)
    print(f"–í—Å–µ–≥–æ —Å—Ü–µ–Ω –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {stats['total_scenes']}")

    print(f"\nüé≠ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Å—Ü–µ–Ω:")
    for scene_type, count in sorted(stats['scene_types_distribution'].items()):
        percentage = (count / stats['total_scenes']) * 100
        print(f"  {scene_type:15} : {count:2} ({percentage:5.1f}%)")

    print(f"\nüé• –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:")
    for effect_type, count in sorted(stats['effects_distribution'].items()):
        percentage = (count / stats['total_scenes']) * 100
        print(f"  {effect_type:15} : {count:2} ({percentage:5.1f}%)")

    print("\n" + "=" * 80)
    print("‚úÖ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê!")
    print("=" * 80)

    # –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª
    print("\nüí° –õ–û–ì–ò–ö–ê –í–´–ë–û–†–ê –≠–§–§–ï–ö–¢–û–í:\n")

    rules_explanation = {
        'HOOK (—Ö—É–∫)': 'Zoom In (50%) ‚Üí –¥—Ä–∞–º–∞—Ç–∏—á–Ω–æ–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –≤–Ω–∏–º–∞–Ω–∏—è',
        'TRANSITION (–ø–µ—Ä–µ—Ö–æ–¥)': 'Pan Left/Right (80%) ‚Üí –ø–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏',
        'EMPHASIS (–∞–∫—Ü–µ–Ω—Ç)': 'Zoom In (70%) ‚Üí —Ñ–æ–∫—É—Å –Ω–∞ –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏',
        'CTA (–ø—Ä–∏–∑—ã–≤)': 'Zoom In (60%) ‚Üí –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è –∫ –¥–µ–π—Å—Ç–≤–∏—é',
        'CONCLUSION (–∏—Ç–æ–≥)': 'Zoom Out (50%) ‚Üí –ø–æ–∫–∞–∑ –æ–±—â–µ–π –∫–∞—Ä—Ç–∏–Ω—ã',
        'EXAMPLE (–ø—Ä–∏–º–µ—Ä)': 'Pan Right/Left (70%) ‚Üí –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Å–º–æ—Ç—Ä',
    }

    for rule_type, explanation in rules_explanation.items():
        print(f"  ‚Ä¢ {rule_type:25} ‚Üí {explanation}")

    print("\nüé¨ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ video_orchestrator!")


if __name__ == "__main__":
    main()
